# CameraConfigurationSample / CodeScanSample / AndroidManifest.xml

22.09.26 (월) 특강 

[UNITY 개발 규칙]
- UNITY project 창에 들어가는 리소스는 반드시 영어로 작성. 그 외의 언어는 Android/iOS 폰에서 실행이 안 됨. (단, UI text로 들어가는 언어는 예외)


[UNITY 개발 결과를 Android 폰에서 활성화하는 법]
# 큐브 회전 확인하기 (Unity 2021.3.7f1 버전 : 0926_Android)
1. Unity Setting
1) File - Build Setting - Android - Install with Unity Hub - (v) Android Build Support    -  install 후 unity 재접속
                                                                         (v) openJDK
                                                                         (v) Android SDK & NDK Tools
2) File - Build Setting - Android - Install with Unity Hub - Switch Platform (project 창에 있는 data를 Android용에 맞게 변형시켜줌) 

2. Hierarchy 창에 큐브 생성 후 Yrot script 연결 
public class Yrot : MonoBehaviour
{
    void Start() { }
    
    void Update()
    {
        transform.Rotate(0, 1f, 0);   //y축으로 1씩 회전
    }
}

3. File - Build Setting - Build - (바탕화면에 따로 Result 폴더 생성) - Android1.apk 파일 생성 (.apk : Android Application Package, 안드로이드에서 프로그램 형태로 배포되는 형식)
* (.apk 파일 생성 시) Package Name 오류가 발생하는 경우--------------------------------
1) File - Build Setting - Player Setting - Player - Company Name (회사 이름) : EL
                                                          - Product Name (제품 이름)   : android1
2) File - Build Setting - Player Setting - OtherSetting - Identification - package name - com.EL.android1 (* Product Name 설정시 자동으로 Package Name 설정. 이 설정이 안되면 Package Name 오류가 생김)
                                                                                     (- version 0.1 : 업그레이드시마다 버전을 올림)
-------------------------------------------------------------------------------------------------

4. Android 폰 개발자 옵션 활성화 : https://blog.naver.com/lifeformula/221685090225
- 위 링크대로 따라함 (강사님 견해로는 이때까지 개발자 옵션 활성화해와도 폰 사용에 별 문제가 없었다고 함)
- android 폰에서 설정 - 빌드 번호를 눌러서 개발자 옵션을 활성화 

5. 컴퓨터와 Android 폰 연동 
1) 내PC - 연동된 Android 폰의 내부저장소 - Download 폴더 - Android1.apk(Result 폴더) 파일을 붙여넣기 
2) Android 폰 - Download 폴더 - Android1.apk 설치 
3) UNITY에서 실행되는 결과 : (큐브가 y축으로 회전 - 설정된 프레임이 다르면 UNITY와 Android폰에서 회전하는 속도가 다르다.)
   Android 폰에서 실행되는 결과 : (큐브가 y축으로 회전) 





[UNITY에서 구현된 AR(증강현실)을 Android 폰에서 확인하기]

# 1 - CameraConfiguration (Unity 2021.3.7f1 버전 : 0926_Maxst)
1. Unity Setting
1) Maxst 홈 (회원가입) - Download - SDK - Unity 다운 ( https://developer.maxst.com/MD/downloadsdk ) - 다운받은 MAXSTARSDK_Unity_5.0.6 파일을 Unity project 창에 drag 및 import
2) File - Build Setting - Android - Install with Unity Hub - Switch Platform (project 창에 있는 data를 Android용에 맞게 변형시켜줌) 

2. Unity에 AR구현  
1) MaxstARSamples 폴더 - Scenes 폴더 - CameraConfiguration.unity 파일을 Hierarchy 창으로 drag
* (Hierarchy 창) CameraConfiguration - ARCamera
		       		- Canvas : 연동된 Android 폰 화면에 보이는 모습
				- SceneManager - CameraConfigurationSample script ( SetFlashLightMode() - 폰 카메라 플래쉬를 켜는 함수, FlipHorizontal() - 수평,  FlipVertical() - 수직,  WhiteBalanceLock() - 흰색으로 화면 재조정,   SetContinuousFocus()	- 포커스 잡아줌,   ChangeCameraPosition() - 카메라 앞으로 볼거냐 뒤로 볼거냐  )

3. Build 
1) File - Build Setting - Scenes in Build - Add Open Scenes - MaxstARSamples/Scenes/CameraConfiguration 추가
2) File - Build Setting - Android - Build - Maxst1.apk(바탕화면 - main 폴더 - RESULT 폴더) 생성

----------------(.apk 파일 생성 시) Package Name 오류가 발생하는 경우-------------------
File - Build Setting - Player Setting - Player - Company Name(회사 이름) : EL
                                                       - Product Name(제품 이름)   : maxst1
File - Build Setting - Player Setting - OtherSetting - Identification - package name - com.EL.maxst1 (* Product Name 설정시 자동으로 Package Name 설정. 이 설정이 안되면 Package Name 오류가 생김)
----------------------------------------------------------------------------------------------
----------------(.apk 파일 생성 시) Graddle 오류가 발생하는 경우-------------------------- 
ex) Gradle Error : MinSDK in Manifest
The minSDK version can not be specified in the AndroidManifest.xml file. You have to remove it. (See the Console for details)
- Troubleshoot / OK  
(일단 OK 누르고 빠져나왔다)

1) Assets 폴더 - Plugins 폴더 - Android 폴더 - AndroidManifest.xml 수정 

	<!--<uses-sdk
		android:minSdkVersion="19"
		android:targetSdkVersion="25"/> -->
 
(xml 에서는 <!--   --> 가 주석처리)


2) File - Build Setting - Player Setting - Android Setting - OtherSetting - Identification - Minimum API Level : Android 8.1 'Oreo' (API level 27) 로 변경 (* 8.1 이하 버전을 유저에게 지원 하지 않음. 즉 버전이 올라갈수록 다운받을 수 있는 유저가 적어진다는 의미.)
3) File - Build Setting - Android - Build - Maxst1.apk(바탕화면 - main 폴더 - RESULT 폴더) 생성
-------------------------------------------------------------------------------------------------

4. 컴퓨터와 Android 폰 연동 (위와 동일, 생략)





# 2 - CodeReader (Unity 2021.3.7f1 버전 : 0926_Maxst)
하이러키뷰-cameraConfiguration - Canvas 
                                         - SceneManager

2) File - Build Setting - Scenes in Build - Add Open Scenes - CodeReader만 활성화


Maxst Pricing - https://developer.maxst.com/Pricing
Maxst홈 - Pricing - Trial Free (무료 라이선스) GET KEY - 앱정보 : maxst2 
                                                                      앱 아이디 : com.EL.maxst2
라이센스키 5.0   /   9dkd+jcv8QXSFQGLVbPZEOgaRCsy6zLEfbeSEcf0n8= 복사

Code Reader - ARcamera -  라이센스키 복붙


-----------------------------------------------------------------------------

# 3 - ImageTracker (Unity 2021.3.7f1 버전 : 0926_Maxst)
1) Assets 폴더 - MaxstARSamples 폴더 - Scenes 폴더 - ImageTracker.unity를 Hierarchy view로 drag
2) File - Build Setting - Scenes in Build - Add Open Scenes - MaxstARSamples/Scenes/imageTracker만 활성화

3) File - Build Setting - Player Setting - Player - Company Name : EL
					 Product Name : ImgTrack 
   File - Build Setting - Player Setting - Player - Other Settings - Identification - Package Name : com.EL.ImgTrack 복사

4) Maxst : https://developer.maxst.com/Licenses
 Maxst홈 - License Manager - Get License - Get SDK Licennse - 앱정보 App Name : ImageTrack          - Get
                                                           	                             App ID      : com.EL.ImgTrack 
 Maxst홈 - License Manager - My Licenses - SDK License - ImageTrack - SDK License Details : 라이선스 키 (5.0x version) 설정 후 키 복사

5) (Hierarchy 창) ImageTracker - ARCamera - (ARCamera의 inspector창) Configuration - License Key Setting - License Key : Maxst홈에서 복사한 라이선스 키 붙여넣기

6) 
File - Build Settings - Android - Build - ImgTrack.apk 저장 (바탕화면에 따로 RESULT 폴더를 만들어 저장)
컴퓨터와 android 폰 연동 후 내부저장소 Download 폴더에 ImgTrack.apk 저장
폰에 있는 download 폴더에 ImgTrack.apk 설치 후 실행 

7) 
Assets 폴더 - Editor 폴더 - MaxstAR 폴더 - Textures 폴더 - Image Target 폴더 - Blocks_resized  를 안드로이드 폰으로 찍으면 AR 이미지가 생성되는 것을 알 수 있다.
				 	       			  - Glacier_resized
					       			  - Lego_resized
(Hierarchy 창에서)
Image Tracker - Image Trackable     이미지 위에 큐브가 구현된 모습
                   - Image Trackable (1) 이미지 위에 구체가 구현된 모습
	       - Image Trackable (2) 이미지 위에 particle system이 구현된 모습
	       - Canvas                 android 폰에서 구현된 스크린 화면 모습



#ImageTracker - 다른 이미지로 교체해보기 (Unity 2021.3.7f1 버전 : 0926_Maxst)
1) Maxst - My menu - Target manager - + (Create New Target Group) - MAXSTimageTrack 폴더 생성 - Upload Target Image - jpg/png 사진 3개 업로드 (Image Tracking : 점(point)이 많고, 음영이 확실히 구분이 되는 것들이 잘 된다. 별 5개일수록 인식이 쉽다.)
Maxst : https://developer.maxst.com/TrackableGroups

2) jpg/png 사진 3개 선택 - Download Target(상자 모양) - Unity - Download 하면 생성된 MAXSTimageTrack 파일을 unity에 import

3) Unity - Assets 폴더 - StreamingAssets 폴더 - MaxstAR 폴더- MAXSTimageTrack 폴더 - 1,2,3 그림 파일을 Hierarchy 창의 ImageTracker - imageTrackable에 각각 drag



# image Tracker 설명 중에 나온 내용들
- AR : 객체(object)나 장면(scene)을 카메라로비추어 인식하고 그 움직임을 추적

- image processing : 디지털 이미지를 수학적으로 처리 하는 기법,  확률 연산이므로 1+1이 2가 될수도 2.5가 될 수도 있다.

- mp3 : 손실 압축(압축률이 높으나 손실이 일어난다. 인간의 청력으로는 거의 구분하기 힘들다.) 
  zip   : 손실은 없으나 압축률이 낮다.

- 현재는 VR이 AR보다 매출액이 큰 편.







# 4 - InstantTracker (Unity 2021.3.7f1 버전 : 0926_Maxst)
1) Assets 폴더 - MaxstARSamples 폴더 - Scenes 폴더 - InstantTracker.unity를 Hierarchy view로 drag

2) File - Build Setting - Scenes in Build - Add Open Scenes - MaxstARSamples/Scenes/instantTracker만 활성화

3) Maxst홈 - License Manager - Get License - Get SDK Licennse - 앱정보 App Name : instantTrack       - Get
                                                                	                    App ID : com.EL.instantTrack 
   Maxst홈 - License Manager - My Licenses - SDK License - InstantTrack - SDK License Details : 라이선스 키 (5.0x version) 설정 후 키 복사

4) (Hierarchy view) InstantTracker - ARCamera - (ARCamera의 inspector창) Configuration - License Key Setting - License Key : Maxst홈에서 복사한 라이선스 키 붙여넣기
								 	   - Camera Settings - Camera Resolution - Resolution 1920x1080 (해상도)

5) File - Build Settings - Android - Build - InstantTrack.apk 저장 (바탕화면에 따로 RESULT 폴더를 만들어 저장)
   컴퓨터와 android 폰 연동 후 Download 폴더에 InstantTrack.apk 저장
   폰에 있는 download 폴더에 InstantTrack.apk 설치 후 실행 -> Start Tracking 버튼을 누르면 최초의 위치에 좌표가 설정, 다른 곳으로 이동해도 최초 위치의 좌표 인식, 카메라 성능이 낮을수록 좌표가 움직이긴 하지만 원래 최초 좌표에 설정된 모습.   - Youtube Image Tracking의 예 : https://www.youtube.com/watch?v=G9OmSdeGg0E 




